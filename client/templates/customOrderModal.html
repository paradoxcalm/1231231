<div class="request-modal">
  <header class="modal-header-with-close">
    <h2 class="request-modal__title">Оформление заявки</h2>
    <button type="button" class="modal-close-btn" data-close-modal aria-label="Закрыть форму">&times;</button>
  </header>
  <section class="modal-body request-modal__body">
    <div class="section-container modal-section request-modal__content">
      <form id="dataForm" enctype="multipart/form-data">
        <h1 class="section-title">ПРИЁМКА</h1>

        <input type="hidden" name="schedule_id" id="formScheduleId" value="">
        <input type="hidden" name="accept_date" id="acceptDateField" value="">
        <input type="hidden" name="delivery_date" id="deliveryDateField" value="">
        <input type="hidden" name="date_of_delivery" id="deliveryDateAlias" value="">
        <input type="hidden" name="accept_time" id="acceptTimeField" value="">
        <input type="hidden" name="direction" id="directionField" value="">

        <div class="form-group">
          <label>Направление:</label>
          <div class="static-field request-modal__static-field" id="legacyDirection">—</div>
        </div>

        <div class="form-group">
          <label>Выезд → Сдача:</label>
          <div class="static-field request-modal__static-field" id="legacyDates">—</div>
        </div>

        <input type="hidden" id="city" name="city" value="">
        <input type="hidden" id="warehouses" name="warehouses" value="">
        <input type="hidden" id="driver_name" name="driver_name" value="">
        <input type="hidden" id="driver_phone" name="driver_phone" value="">
        <input type="hidden" id="car_number" name="car_number" value="">
        <input type="hidden" id="car_brand" name="car_brand" value="">
        <input type="hidden" id="sender" name="sender" value="">

        <div class="form-group">
          <label class="section-label">Тип упаковки:</label>
          <div class="request-modal__option-group">
            <label class="request-modal__option"><input type="radio" name="packaging_type" value="Box" checked> Коробка</label>
            <label class="request-modal__option"><input type="radio" name="packaging_type" value="Pallet"> Паллета</label>
          </div>
        </div>

        <div class="form-group">
          <label for="boxes">Количество:</label>
          <input type="number" id="boxes" name="boxes" min="1" required>
        </div>

        <div id="palletInputBlock" class="form-group" style="display:none;">
          <label>Параметры палет:</label>
          <div id="palletFields" class="request-modal__pallet-fields"></div>
          <p id="palletWarning" class="request-modal__warning" style="display:none;">Максимум 20 палет</p>
        </div>

        <div class="form-group" id="boxTypeBlock">
          <label class="section-label">Тип коробки:</label>
          <div class="request-modal__option-group">
            <label class="request-modal__option"><input type="radio" name="box_type" value="standard" checked> Стандарт (60×40×40)</label>
            <label class="request-modal__option"><input type="radio" name="box_type" value="custom"> Свои размеры</label>
          </div>
        </div>

        <div class="form-group" id="boxSizeBlock">
          <label>Габариты одной коробки (см):</label>
          <div class="request-modal__dimensions">
            <input type="number" id="box_length" name="box_length" placeholder="Длина" class="request-modal__dimension-input">
            <input type="number" id="box_width" name="box_width" placeholder="Ширина" class="request-modal__dimension-input">
            <input type="number" id="box_height" name="box_height" placeholder="Высота" class="request-modal__dimension-input">
          </div>
        </div>

        <div class="form-group request-modal__custom-box" id="customBoxFieldsBlock" style="display:none;">
          <label>Свои группы коробов:</label>
          <input type="number" id="customBoxGroupCount" min="1" max="10" placeholder="Кол-во групп" class="request-modal__group-count">
          <div id="customBoxFields" class="request-modal__custom-fields"></div>
          <p id="customBoxWarning" class="request-modal__warning" style="display:none;">Сумма количеств в группах не должна превышать общее количество коробов</p>
        </div>

        <div class="form-group"><label>Общий объём:</label><span id="box_volume">—</span></div>
        <div class="form-group"><label>Тариф:</label><span id="tariff_rate">—</span></div>
        <div class="form-group"><label for="payment">Сумма оплаты:</label>
          <input type="number" id="payment" name="payment" readonly>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="pickupCheckbox" name="pickup_checkbox">
            Забрать груз с адреса отправителя
          </label>
        </div>

        <div id="pickupAddressFields" class="request-modal__pickup" style="display:none;">
          <div id="pickupMap" class="request-modal__map"></div>

          <input type="hidden" id="pickupLat" name="pickup_lat">
          <input type="hidden" id="pickupLng" name="pickup_lng">

          <label for="clientPhone" class="request-modal__pickup-label">Номер для связи:</label>
          <input type="tel" id="clientPhone" name="client_phone" placeholder="+7 (999) 123-45-67" class="request-modal__pickup-phone">

          <div id="routeBlock" class="request-modal__route" style="display:none;">
            <span class="request-modal__route-label">Ссылка для навигатора:</span>
            <div class="request-modal__route-links">
              <a id="routeLinkYandex" href="#" target="_blank" class="request-modal__route-link"></a>
              <a id="routeLinkGoogle" href="#" target="_blank" class="request-modal__route-link"></a>
              <button type="button" id="routeCopyBtn" class="request-modal__route-copy">Копировать</button>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="comment">Комментарий:</label>
          <textarea id="comment" name="comment" rows="3" placeholder="Введите комментарий"></textarea>
        </div>
        <button type="submit">Отправить</button>
      </form>
      <p id="status"></p>
    </div>
  </section>
</div>
