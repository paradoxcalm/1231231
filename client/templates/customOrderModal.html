<div class="request-modal">
  <header class="modal-header-with-close">
    <h2 class="request-modal__title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏</h2>
    <button type="button" class="modal-close-btn" data-close-modal aria-label="–ó–∞–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É">&times;</button>
  </header>
  <section class="modal-body request-modal__body">
    <div class="section-container modal-section request-modal__content">
      <form id="dataForm" enctype="multipart/form-data">
        <input type="hidden" name="schedule_id" id="formScheduleId" value="">
        <input type="hidden" name="accept_date" id="acceptDateField" value="">
        <input type="hidden" name="delivery_date" id="deliveryDateField" value="">
        <input type="hidden" name="date_of_delivery" id="deliveryDateAlias" value="">
        <input type="hidden" name="accept_time" id="acceptTimeField" value="">
        <input type="hidden" name="direction" id="directionField" value="">

        <div class="request-modal__overview" role="group" aria-label="–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞—è–≤–∫–∏">
          <div class="request-overview__line request-overview__line--city">
            <span class="request-overview__icon" aria-hidden="true">üìç</span>
            <div class="request-overview__content">
              <label class="request-overview__label" for="city">–ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è</label>
              <div class="request-overview__control request-form__city-control">
                <select id="city" name="city" class="request-form__city-select request-overview__select" autocomplete="off" required>
                  <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                </select>
              </div>
            </div>
          </div>
          <div class="request-overview__line request-overview__line--direction">
            <span class="request-overview__icon" aria-hidden="true">‚û°Ô∏è</span>
            <div class="request-overview__content">
              <span class="request-overview__label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</span>
              <span class="request-overview__value request-overview__value--accent" id="legacyDirection" role="text" aria-live="polite">‚Äî</span>
            </div>
          </div>
          <div class="request-overview__line request-overview__line--dates">
            <span class="request-overview__icon" aria-hidden="true">üóì</span>
            <div class="request-overview__content">
              <span class="request-overview__label">–î–∞—Ç—ã</span>
              <span class="request-overview__value request-overview__value--accent" id="legacyDates" role="text" aria-live="polite">‚Äî</span>
            </div>
          </div>
        </div>

        <div class="request-modal__selection request-modal__selection--compact" aria-live="polite">
          <div class="request-selection__details">
            <div class="request-selection__line">
              <span class="request-selection__icon" aria-hidden="true">üõí</span>
              <div class="request-selection__content">
                <span class="request-overview__label">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</span>
                <span class="request-overview__value request-overview__value--accent" id="legacyMarketplace" role="text">‚Äî</span>
              </div>
            </div>
            <div class="request-selection__line">
              <span class="request-selection__icon" aria-hidden="true">üè¨</span>
              <div class="request-selection__content">
                <span class="request-overview__label">–°–∫–ª–∞–¥</span>
                <span class="request-overview__value request-overview__value--accent" id="legacyWarehouse" role="text">‚Äî</span>
              </div>
            </div>
          </div>
          <button type="button" class="request-modal__selection-change" data-action="change-marketplace" aria-label="–ò–∑–º–µ–Ω–∏—Ç—å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –∏ —Å–∫–ª–∞–¥">
            –ò–∑–º–µ–Ω–∏—Ç—å
          </button>
        </div>
        <input type="hidden" id="warehouses" name="warehouses" value="">
        <input type="hidden" id="driver_name" name="driver_name" value="">
        <input type="hidden" id="driver_phone" name="driver_phone" value="">
        <input type="hidden" id="car_number" name="car_number" value="">
        <input type="hidden" id="car_brand" name="car_brand" value="">
        <input type="hidden" id="sender" name="sender" value="">

        <p id="citySelectionNotice" class="request-form__city-notice" role="status" aria-live="polite">
          –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è‚Ä¶
        </p>

        <div id="cityDependentFields" class="request-form__city-dependent">
          <div class="form-group request-form__group">
            <label class="section-label">–¢–∏–ø —É–ø–∞–∫–æ–≤–∫–∏:</label>
            <div class="request-modal__option-group request-form__radio-row">
              <label class="request-modal__option request-form__option">
                <input type="radio" class="form-radio" name="packaging_type" value="Box" checked>
                <span class="request-form__option-label">–ö–æ—Ä–æ–±–∫–∞</span>
              </label>
              <label class="request-modal__option request-form__option">
                <input type="radio" class="form-radio" name="packaging_type" value="Pallet">
                <span class="request-form__option-label">–ü–∞–ª–ª–µ—Ç–∞</span>
              </label>
            </div>
          </div>

          <div class="form-group request-form__group">
            <label for="boxes">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
            <input type="number" id="boxes" name="boxes" min="1" required>
          </div>

          <div id="palletInputBlock" class="form-group request-form__group request-modal__custom-box request-form__pallet-group request-form__hidden">
            <label>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–ª–µ—Ç:</label>
            <div id="palletFields" class="request-modal__pallet-fields request-form__pallet-grid"></div>
            <p id="palletWarning" class="request-modal__warning request-form__warning form-error text-danger request-form__hidden">–ú–∞–∫—Å–∏–º—É–º 20 –ø–∞–ª–µ—Ç</p>
          </div>

          <div class="form-group request-form__group" id="boxTypeBlock">
            <label class="section-label">–¢–∏–ø –∫–æ—Ä–æ–±–∫–∏:</label>
            <div class="request-modal__option-group request-form__radio-row">
              <label class="request-modal__option request-form__option">
                <input type="radio" class="form-radio" name="box_type" value="standard" checked>
                <span class="request-form__option-label">–°—Ç–∞–Ω–¥–∞—Ä—Ç (60√ó40√ó40)</span>
              </label>
              <label class="request-modal__option request-form__option">
                <input type="radio" class="form-radio" name="box_type" value="custom">
                <span class="request-form__option-label">–°–≤–æ–∏ —Ä–∞–∑–º–µ—Ä—ã</span>
              </label>
            </div>
          </div>

          <div class="form-group request-form__group request-form__box-dimensions" id="boxSizeBlock">
            <label>–ì–∞–±–∞—Ä–∏—Ç—ã –æ–¥–Ω–æ–π –∫–æ—Ä–æ–±–∫–∏ (—Å–º):</label>
            <div class="request-modal__dimensions request-form__dimensions">
              <input type="number" id="box_length" name="box_length" placeholder="–î–ª–∏–Ω–∞" class="request-modal__dimension-input request-form__dimension-input">
              <input type="number" id="box_width" name="box_width" placeholder="–®–∏—Ä–∏–Ω–∞" class="request-modal__dimension-input request-form__dimension-input">
              <input type="number" id="box_height" name="box_height" placeholder="–í—ã—Å–æ—Ç–∞" class="request-modal__dimension-input request-form__dimension-input">
            </div>
          </div>

          <div class="form-group request-form__group request-modal__custom-box request-form__custom-box request-form__hidden" id="customBoxFieldsBlock">
            <label>–°–≤–æ–∏ –≥—Ä—É–ø–ø—ã –∫–æ—Ä–æ–±–æ–≤:</label>
            <input type="number" id="customBoxGroupCount" min="1" max="10" placeholder="–ö–æ–ª-–≤–æ –≥—Ä—É–ø–ø" class="request-modal__group-count request-form__group-count">
            <div id="customBoxFields" class="request-modal__custom-fields request-form__custom-fields"></div>
            <p id="customBoxWarning" class="request-modal__warning request-form__warning form-error text-danger request-form__hidden">–°—É–º–º–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤ –≤ –≥—Ä—É–ø–ø–∞—Ö –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–≤—ã—à–∞—Ç—å –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä–æ–±–æ–≤</p>
          </div>

          <div class="form-group request-form__group request-form__summary"><label>–û–±—â–∏–π –æ–±—ä—ë–º:</label><span id="box_volume" class="request-form__summary-value">‚Äî</span></div>
          <div class="form-group request-form__group request-form__summary"><label>–¢–∞—Ä–∏—Ñ:</label><span id="tariff_rate" class="request-form__summary-value">‚Äî</span></div>
          <div class="form-group request-form__group"><label for="payment">–°—É–º–º–∞ –æ–ø–ª–∞—Ç—ã:</label>
            <input type="number" id="payment" name="payment" readonly>
          </div>

          <div class="form-group request-form__group request-form__checkbox">
            <label class="form-switch request-form__switch">
              <input type="checkbox" id="pickupCheckbox" name="pickup_checkbox" class="form-switch__input">
              <span class="form-switch__control" aria-hidden="true"></span>
              <span class="form-switch__label">–ó–∞–±—Ä–∞—Ç—å –≥—Ä—É–∑ —Å –∞–¥—Ä–µ—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è</span>
            </label>
          </div>

          <div id="pickupAddressFields" class="request-modal__pickup request-form__pickup request-form__hidden">
            <div class="request-card">
              <div class="request-card__body">
                <div id="pickupMap" class="request-card__map request-modal__map request-form__map"></div>

                <input type="hidden" id="pickupLat" name="pickup_lat">
                <input type="hidden" id="pickupLng" name="pickup_lng">

                <div class="request-card__field">
                  <label for="clientPhone" class="request-card__label request-modal__pickup-label request-form__pickup-label">–ù–æ–º–µ—Ä –¥–ª—è —Å–≤—è–∑–∏:</label>
                  <input type="tel" id="clientPhone" name="client_phone" placeholder="+7 (999) 123-45-67" class="request-card__input request-modal__pickup-phone request-form__pickup-input">
                </div>

                <div id="routeBlock" class="request-card__route request-modal__route request-form__route request-form__hidden">
                  <span class="request-card__route-label request-modal__route-label request-form__route-label">–°—Å—ã–ª–∫–∞ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞:</span>
                  <div class="request-card__routes request-modal__route-links request-form__route-links">
                    <div class="request-card__route-group">
                      <a id="routeLinkYandex" href="#" target="_blank" class="link-button request-card__link request-modal__route-link request-form__route-link"></a>
                      <button type="button" id="routeCopyBtn" class="ghost-button request-card__copy request-modal__route-copy request-form__route-copy">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    <a id="routeLinkGoogle" href="#" target="_blank" class="link-button request-card__link request-modal__route-link request-form__route-link"></a>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group request-form__group">
            <label for="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
            <textarea id="comment" name="comment" rows="3" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"></textarea>
          </div>
          <div class="modal-actions request-form__actions">
            <button type="submit" class="primary-button request-form__submit">
              <span class="button__label">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
            </button>
          </div>
        </div>
      </form>
      <p id="status" class="request-form__status"></p>
    </div>
  </section>
</div>
